rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // **REGLAS DE STORAGE EDUCATIVAS PARA MYLIBRARY** 游닝
    
    // Regla 1: Fotos de perfil - Solo el propietario puede subir/modificar
    // Ruta: profile-images/{userId}/{filename}
    match /profile-images/{userId}/{allPaths=**} {
      // Solo el usuario propietario puede subir su foto de perfil
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Regla 2: Im치genes temporales para testing (desarrollo)
    // Permite subir im치genes temporales para prop칩sitos educativos
    match /temp-images/{allPaths=**} {
      allow read, write: if request.auth != null;
    }
    
    // Regla 3: Archivos p칰blicos (solo lectura)
    // Para recursos est치ticos como placeholders o im치genes por defecto
    match /public/{allPaths=**} {
      allow read: if true; // Lectura p칰blica
      allow write: if false; // Solo administradores (no implementado)
    }
  }
}